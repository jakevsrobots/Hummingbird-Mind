<game startingScene="office">
  <!-- ###############  ASSETS  ############### -->
  <assets>
    <asset name="cursor" file="cursor.png"
           type="image" />
    <asset name="menuBackground" file="menu-background.png"
           type="image" />
    
    <!-- backgrounds -->
    <asset name="office" file="backgrounds/office.png"
           type="image" />
    <asset name="office_dark" file="backgrounds/office-dark.png"
           type="image" />
    <asset name="kitchen_sink" file="backgrounds/kitchen-sink.png"
           type="image" />
    <asset name="cabinet_above_blender" file="backgrounds/cabinet-above-blender.png"
           type="image" />
    <asset name="cabinet_dark" file="backgrounds/cabinet-dark.png"
           type="image" />
    <asset name="under_the_sink" file="backgrounds/under-the-sink.png"
           type="image" />
    <asset name="in_refrigerator" file="backgrounds/in-refrigerator.png"
           type="image" />

    <!-- backgrounds not yet actually created -->
    <!--
    <asset name="mail_hallway" file="backgrounds/mail-hallway.png"
           type="image" />
    <asset name="dog_on_floor" file="backgrounds/dog-on-floor.png"
           type="image" />
    <asset name="outside_apartment" file="backgrounds/outside-apartment.png"
           type="image" />
    <asset name="sky" file="backgrounds/sky.png"
           type="image" />
    -->
    
    <!-- sprites -->
    <asset name="hummingbird_at_desk" file="sprites/hummingbird-at-desk.png"
           type="image" />
    <asset name="cat" file="sprites/cat.png"
           type="image" />

    <!-- sprites not yet actually created -->
    <!--
    <asset name="chatting_birds" file="sprites/chatting-birds.png"
           type="image" />
    -->
    
    
  </assets>

  <!-- ###############  SCENES  ############### -->
  
  <!-- Starting office -->
  <scenes firstScene="office">
    <scene title="Home Office" name="office" background="office">
      <dialog>
        <body>My "home office." It was really just a desk in a corner of the living room, but it was enough space for my computer and drawer of important-papers-that-I-pretend-do-not-exist.</body>
      </dialog>
      <dialog>
        <body>
          That day, I couldn't manage to concentrate. My eyelids felt like lead, and I kept finding excuses to distract myself.
        </body>
        <option goto="office-asleep">I lay my head down on the desk and closed my eyes.</option>
        <option goto="kitchen">I got up and went to the kitchen to do some dishes.</option>
        <option goto="check-mail">I got up and went to check the mail.</option>
      </dialog>
    </scene>
    
    <scene title="Home Office" name="short-start-office" background="office">
      <dialog>
        <body>
          I sat at my desk, unable to concentrate. My eyelids felt like lead, and I kept finding excuses to distract myself.
        </body>
        <option goto="office-asleep">I lay my head down on the desk and closed my eyes.</option>
        <option goto="kitchen">I got up and went to the kitchen to do some dishes.</option>
        <option goto="kitchen">I got up and went to check the mail.</option>        
      </dialog>
    </scene>

    <scene title="Home Office" name="office-asleep" background="office_dark">
      <dialog>
        <body>
          I could hear the air conditioner droning in the next room. Traffic rumbled from the overpass a few blocks away.
        </body>
      </dialog>
      <dialog goto="office-bird-appears">
        <body>
          And, suddenly, a voice...?
        </body>
      </dialog>
    </scene>

    <!-- Bird visitor -->
    <scene title="A Hummingbird Hovering at the Desk" name="office-bird-appears" background="office_dark">
      <sprite name="hummingbird_at_desk" />
      
      <dialog>
        <body>
          "Good afternoon." A small hummingbird was hovering over my desk. "I say, have you seen my hat?"
        </body>
        <option goto="office-bird-hat-response">I was so stunned that I responded immediately.</option>
        <option goto="office-bird-hat-unfamiliar">I was so stunned that I couldn't speak.</option>
      </dialog>
    </scene>
    
    <scene title="A Hummingbird Hovering at the Desk" name="office-bird-hat-response" background="office_dark">
      <sprite name="hummingbird_at_desk" />
      
      <dialog>
        <body>
          "I'm afraid I haven't seen your hat," I said, trying to affect a confident tone. "That is... what does it look like?"
        </body>
      </dialog>
      <dialog>
        <body>
          "Well, it's black," said the hummingbird, "Soft, sort of a long stocking cap. It's easy to wash, looks clever, and has magic properties. Ring any bells?"
        </body>
        <option goto="office-bird-hat-magic-properties">Magic properties? I had to know more.</option>
        <option goto="office-bird-hat-unfamiliar">Magic properties? All I had to offer was a blank stare.</option>
      </dialog>
    </scene>

    <scene title="A Hummingbird Hovering at the Desk" name="office-bird-hat-magic-properties" background="office_dark">
      <sprite name="hummingbird_at_desk" />

      <dialog>
        <body>
          The hummingbird must have sensed my interest pique at his mention of magic. "Oh, it is a powerful hat, my friend. Anyone who dons it... well, I'm not quite convinced you're ready to hear about it..."
        </body>
      </dialog>
      <dialog>
        <body>
          What a snob!
        </body>
        <option goto="office-bird-hat-unfamiliar">"Well, where do you think it could be?" I asked.</option>
        <option goto="office-bird-hat-magic-denial">"Don't be coy, I can handle it!" I insisted.</option>
      </dialog>
    </scene>

    <scene title="A Hummingbird Hovering at the Desk" name="office-bird-hat-magic-denial" background="office_dark">
      <sprite name="hummingbird_at_desk" />

      <dialog goto="office-bird-hat-unfamiliar">
        <body>
          "I admire your confidence, partner, but I'm afraid I won't be persuaded." I could tell the hummingbird was committed to silence.
        </body>
      </dialog>
    </scene>
    
    <scene title="A Hummingbird Hovering at the Desk" name="office-bird-hat-unfamiliar" background="office_dark">
      <sprite name="hummingbird_at_desk" />
      <setFlag name="hummingbirdMentionedKitten" value="1" />
      
      <dialog>
        <body>
          The hummingbird's feathers bristled as it peevishly alternated between two spots in the air. "That wicked kitten has hidden it," it said, "I knew it, of course. Where she walks, a cloud of fur and mischief follows."
        </body>
      </dialog>
      <dialog goto="office-wake-up">
        <body>
          "If you do see my hat, or that amoral thief of a kitten, please fall asleep at your desk again and return it to me, won't you?"
        </body>
      </dialog>
    </scene>

    <!-- Waking up in office -->
    <scene title="Home Office" name="office-wake-up" background="office">
      <dialog>
        <body>The hummingbird's words startled me awake. I lifted my head and wiped a bit of drool off my desk with the end of my sleeve; how embarassing.</body>
      </dialog>
      <dialog goto="short-start-office">
        <body>The dream faded quickly, but I was left with the vestiges of an image: a kitten wearing a stocking cap. A cat in a hat?</body>
      </dialog>
    </scene>

    <!-- Kitchen sink -->
    <scene title="Kitchen Sink" name="kitchen" background="kitchen_sink">
      <dialog conditionFlag="dishesDone">
        <body>
          The dishes were clean, propped up on the dish rack to dry.
        </body>
          <option goto="short-start-office">I went back into my office.</option>
          <option goto="cabinet-above-blender">I looked at the cabinet above the blender.</option>        
      </dialog>
      <dialog>
        <body>
          The counters were piled with dirty plates and silverware from a dinner party the weekend before. I started the hot water tap.
        </body>
      </dialog>
      <dialog>
        <body>
          Running hot water always relaxed me; even that summer day, when the apartment was at least 80 degrees. I was distractedly collecting dishes from the counters into the sink, when I realized I had forgotten something:
        </body>
        <option goto="kitchen-remember-dish-soap">The dish soap!</option>
        <option goto="check-mail">The mail!</option>
      </dialog>
    </scene>

    <scene title="Kitchen Sink" name="kitchen-sink-wash-dishes" background="kitchen_sink">
      <setFlag name="dishesDone" value="1" />
      
      <dialog goto="kitchen">
        <body>
          I soaped, scrubbed and rinsed each dish, then left them on the rack to dry. By the time I'd finished, I was sweating in the afternoon heat but I felt relieved to have accomplished something.
        </body>
      </dialog>
    </scene>
    
    <scene title="Kitchen Sink" name="kitchen-remember-dish-soap" background="kitchen_sink">
      <dialog>
        <body>
          I didn't know where the dish soap was; I often stashed it somewhere creative and then forgot.
        </body>
        <option goto="short-start-office">I gave up and went back into my office.</option>                
        <option goto="cabinet-above-blender">It might have been in the cabinet above the blender.</option>        
        <option goto="under-the-sink">It might have been under the sink.</option>
        <option conditionFlag="catRevealedDishSoapLocation" goto="in-the-refrigerator">It might have been in the refrigerator.</option>
      </dialog>
    </scene>
    
    <scene title="Kitchen Sink" name="kitchen-remember-mail" background="kitchen_sink">
      <dialog>
        <body>
          I thought I should probably check if the mail had come yet, though I wasn't expecting anything specific.
        </body>
      </dialog>
    </scene>

    <scene title="In the Refrigerator" name="in-the-refrigerator" background="in_refrigerator">
      <dialog goto="kitchen-sink-wash-dishes">
        <body>
          The refrigerator seemed like an unlikely place for the dish soap. But, of course, there it was.
        </body>
      </dialog>
    </scene>

    <scene title="The Cabinet Above the Blender" name="cabinet-above-blender" background="cabinet_above_blender">
      <dialog>
        <body>
          Olive oil, vinegar, chili powder, and fruit snacks. It didn't look like the dish soap was in the cabinet.
        </body>
        <option goto="cabinet-cat-photo">But I saw a photo of my cat, Eloise, hung on the door.</option>
        <option goto="kitchen-remember-dish-soap">So I kept looking elsewhere.</option>
      </dialog>
    </scene>

    <scene title="The Cabinet Above the Blender" name="cabinet-cat-photo" background="cabinet_above_blender">
      <dialog>
        <body>
          Hung up on the cabinet door was a photo of my cat, Eloise, with a wild-eyed and dangerous expression. Just some frozen moment captured mid-thrash. It was impossible to know what she might have been thinking or feeling in that moment; was she playing or fighting?
        </body>
        <option goto="what-the-cat-would-say">What would Eloise say about this photo if she could talk?</option>
        <option goto="kitchen-remember-dish-soap">I went back to looking for the dish soap</option>
      </dialog>
    </scene>
    
    <scene title="Under the Sink" name="under-the-sink" background="under_the_sink">
      <dialog>
        <body>
          When I looked under the sink, I only found a few brilo pads.
        </body>
        <option goto="kitchen-remember-dish-soap">I decided to look elsewhere.</option>
      </dialog>
    </scene>

    <!-- Wondering about the cat's thoughts -->
    <scene title="What the Cat Would Say If She Could Talk" name="what-the-cat-would-say" background="cabinet_dark">
      <sprite name="cat" />
      
      <dialog>
        <body>
          "What a glorious moment," she might say. "But you have it from the wrong angle. I would prefer to be towering above the camera, claws extended. The camera pans in a graceful sweep: it is a gazelle. I am a panther."
        </body>
      </dialog>
      <dialog>
        <body>
          She would draw herself out of her reverie and look intensely at me, as though she had just noticed I was there.
        </body>
        <option goto="cat-surprised-uncomfortable">I would be a little surprised and uncomfortable.</option>
        <option goto="cat-scratch-ear">I would scratch her behind her ear.</option>
        <option conditionFlag="hummingbirdMentionedKitten" goto="cat-ask-about-hummingbird-hat">I would ask about the hummingbird's hat.</option>
        <option conditionFlag="catAskedRiddle" goto="cat-ask-riddle">I would ask her to try the riddle again.</option>        
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-surprised-uncomfortable" background="cabinet_dark">
      <sprite name="cat" />
      
      <dialog>
        <body>
          Eloise would give me a stern look and then turn away. "Don't be so quiet," she'd say, "If you have nothing to say, at least turn on a dripping faucet or something."
        </body>
        <option goto="cat-scratch-ear">I would scratch her behind her ear.</option>        
        <option conditionFlag="hummingbirdMentionedKitten" goto="cat-ask-about-hummingbird-hat">I would ask about the hummingbird's hat.</option>        
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-scratch-ear" background="cabinet_dark">
      <sprite name="cat" />

      <dialog goto="cat-waiting-for-question">
        <body>
          Eloise would arch her neck and look away as I scratched behind her ear, half submitting to the joy of it and half pretending I didn't exist.
        </body>
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-waiting-for-question" background="cabinet_dark">
      <sprite name="cat" />
      
      <dialog>
        <body>
          "Now," she would say, "Was there something you needed to ask me?"
        </body>
        <option goto="cat-ask-about-dish-soap">I would ask if she knew where the dish soap was.</option>
        <option conditionFlag="hummingbirdMentionedKitten" goto="cat-ask-about-hummingbird-hat">I would ask about the hummingbird's hat.</option>
        <option goto="cabinet-cat-photo">With nothing to ask, I would excuse myself.</option>
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-ask-about-dish-soap" background="cabinet_dark">
      <sprite name="cat" />
      <setFlag name="catAskedRiddle" value="1" />
      
      <dialog>
        <body>
          Eloise would look directly at me. "Ah," she would say, "The mysterious missing dish soap. I know where it is; I watch every placement of every item in this house quite closely."
        </body>
      </dialog>
      <dialog>
        <body>
          "I will share this information with you. But first, I need you to answer a riddle for me. You see, I have more in common with the Sphinx than just our equally mighty and imposing presences. I also am fond of riddles."
        </body>
      </dialog>
      <dialog>
        <body>
          Her mouth would crack wide with a yawn, her gaze finally settling back on me. "Here is your riddle," she would say. "What kind of bird lives in the park by your house?"
        </body>
      </dialog>
      <dialog>
        <body>
          I might be a bit surprised. "Is that ... really a riddle?" I'd ask, with as much deference as I could muster.
        </body>
      </dialog>
      <dialog>
        <body>
          "Of course it is!" She would insist, "A riddle is, by definition, an inscrutable question asked by a powerful cat. Do you have an answer?"
        </body>
        <option conditionFlag="beenToPark" goto="cat-no-birds">"There are no birds in the park," I would say.</option>
        <option conditionFlag="seenCloudBirds" goto="cat-cloud-birds">"Cloud birds," I would say.</option>
        <option goto="cat-riddle-no-answer">"I'm afraid I don't," I would say.</option>
      </dialog>
       
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-ask-riddle" background="cabinet_dark">
      <sprite name="cat" />
      <setFlag name="catAskedRiddle" value="1" />

      <dialog>
        <body>
          "Here is your riddle," she would say. "What kind of bird lives in the park by your house?"
        </body>
        <option conditionFlag="beenToPark" goto="cat-no-birds">"There are no birds in the park," I would answer.</option>
        <option conditionFlag="seenCloudBirds" goto="cat-cloud-birds">"Cloud birds," I would answer.</option>
        <option goto="cat-riddle-no-answer">"I still don't know," I would answer.</option>
      </dialog>
      
    </scene>
    
    <scene title="What the Cat Would Say If She Could Talk" name="cat-riddle-no-answer" background="cabinet_dark">
      <sprite name="cat" />

      <dialog goto="cabinet-cat-photo">
        <body>
          "Well," she would say, trying to conceal her disappointment, "go reflect on it and come back later, I suppose"
        </body>
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-ask-about-hummingbird-hat" background="cabinet_dark">
      <sprite name="cat" />

      <dialog>
        <body>
          "What's that?" she would ask. "A hummingbird's hat? I don't know a thing about it."
        </body>
      </dialog>
      <dialog>
        <body>
          "It's just that he said the hat had been taken by a kitten," I'd say.
        </body>
      </dialog>
      <dialog>
        <body>
          The dismay on her face would be palpable. "A kitten?!" she would exclaim, "Do I look like a kitten to you? I am a lioness, a queen cougar, a sphinx!"
        </body>
      </dialog>
      <dialog goto="cat-waiting-for-question">
        <body>
          "Still ..." she would collect herself, "I'm quite sure I know the kitten in question. A few blocks from my castle", by which she may mean my apartment, "a litter of kittens has recently been born. They are the most mischievous little things. One of them will surely have the hummingbird's hat."
        </body>
      </dialog>
    </scene>

    <scene title="What the Cat Would Say If She Could Talk" name="cat-cloud-birds" background="cabinet_dark">
      <sprite name="cat" />
      <setFlag name="catRevealedDishSoapLocation" value="1" />      
      
      <dialog>
        <body>
          Her pupils would dilate. "Cloud Birds!" she would exclaim. "What a fluffy, delicious notion. How could I say 'no' to Cloud Birds?!"
        </body>
      </dialog>
      <dialog>
        <body>
          "Now," she would say with an air of confidentiality, "the location of your precious dish soap; which, I should take this opportunity to note, makes the water taste terrible. The dish soap is in the refrigerator."
        </body>
      </dialog>
      <dialog>
        <body>
          "It ... really? The refrigerator?" I would be dumbfounded.
        </body>
      </dialog>
      <dialog>
        <body>
          "I agree," she would nod gravely, "it is a ridiculous place to store the dish soap. I am of the school of thought which holds the refrigerator to be the sacred and inviolable domain of milk, cream, and wet cat food. You, it seems, are not."
        </body>
      </dialog>
      <dialog goto="kitchen-remember-dish-soap">
        <body>
          I would shrug, scratch her behind the ear, and return to the task at hand.
        </body>
      </dialog>
    </scene>

    <!-- Checking the mail -->
    <scene title="Checking the Mail" name="check-mail" background="mail_hallway">
      <dialog>
        <body>
          I stepped out the apartment door and walked downstairs to the mailboxes, but there was no mail. Was it just too early or was there nothing in the mail for me today? I had no way of knowing.
        </body>
        <option goto="short-start-office">I went back to my office.</option>
        <option goto="walk-dog">Since I was already up and about, I decided to walk the dog.</option>        
      </dialog>
    </scene>

    <!-- Walking the dog -->
    <scene title="Walking the Dog" name="walk-dog" background="dog_on_floor">
      <dialog goto="outside-the-apartment">
        <body>
          Hattie the dog was laying on the floor, half-asleep with her tongue hanging out a bit. All it took to rouse her was pulling her leash off its hook and jingling my keys. We walked down the stairs together, and out into the afternoon sun.
        </body>
      </dialog>
    </scene>
    
    <scene title="Just Outside the Apartment Building" name="outside-the-apartment" background="outside_apartment">
      <dialog>
        <body>
          Hattie the dog quickly ran over to a patch of grass between the street and sidewalk to do her business. I looked up at the trees in front of the apartment building, grateful for the shade.
        </body>
        <option goto="dog-park">Hattie and I walked north, toward the park.</option>
        <option goto="dog-school">Hattie and I walked east, toward the school.</option>        
        <option goto="short-start-office">I called to Hattie and we went back into the apartment.</option>
      </dialog>
    </scene>

    <scene title="The Park" name="dog-park" background="park">
      <setFlag name="beenToPark" value="1" />
      
      <dialog>
        <body>
          Hattie and I walked up toward the park. She stopped a few times to smell or taste the ground, once to go after a stray chicken bone that I had to pull her away from.
        </body>
      </dialog>
      <dialog>
        <body>
          When we reached the park, it was empty. The heat seemed to be getting to us both; Hattie's tongue lolled out the side of her mouth, flapping in the breeze like a pennant, while I wiped sweat from my forehead and neck.
        </body>
      </dialog>
      <dialog>
        <body>
          I found a spot in the shade for us to sit in.
        </body>
        <option goto="park-sky">I lay down on the grass. Hattie lay at my side, chewing on a stick she'd found.</option>
        <option goto="dog-park-stay-awake">I sat on the grass but kept awake using the mantra the hummingbird had taught me.</option>
        <option goto="outside-the-apartment">I got back up and headed back toward the apartment with Hattie.</option>
      </dialog>
    </scene>

    <scene title="The Park" name="wake-up-in-park" background="park">
      <dialog>
        <body>
          The cloud bird's exclamation woke me with a start. Or had I heard something else; maybe Hattie barking at a passerby? She was standing next to me, looking protective and a bit upset. I shouldn't have fallen asleep like that, but it was hard not to in the summer sun.
        </body>
      </dialog>
      <dialog goto="outside-the-apartment">
        <body>
          I got back up and headed back toward the apartment with Hattie.          
        </body>
      </dialog>
    </scene>

    <scene title="The Park" name="dog-park-stay-awake" background="park">
      <dialog>
        <body>
          
        </body>
      </dialog>
    </scene>      
    
    <!-- The sky -->
    <scene title="Looking at the Sky" name="park-sky" background="sky">
      <dialog>
        <body>
          The sky was mostly clear and blue that day, though a little cloud cover would have been a welcome relief. A few clouds drifted across at a leisurely pace.
        </body>
      </dialog>
      <dialog goto="chatting-birds">
        <body>
          I watched the clouds and thought casually about the shapes they made: A cat's cloud paw, a cloud plate, a stocking cloud cap, a pair of chatting cloud birds.
        </body>
      </dialog>
    </scene>

    <!-- A pair of chatting cloud birds -->
    <scene title="A Pair of Chatting Cloud Birds" name="chatting-birds" background="sky-dark">
      <sprite name="chatting_birds" />
      <setFlag name="seenCloudBirds" value="1" />
      
      <dialog>
        <body>
          An idle pair of cloud birds chatted away in the sky.
        </body>
      </dialog>
      <dialog>
        <body>
          "Does the mail ever come?" asked the small cloud bird. "It seems that the mail never comes."
        </body>
      </dialog>
      <dialog>
        <body>
          The large cloud bird cocked its head, "The mail comes ... but the mail must be delivered!"
        </body>
      </dialog>
      <dialog>
        <body>
          "By whom is the mail delievered, when the mail comes?" asked the small bird, shifting its scrawny, vapory feet on its fragile cloud perch.
        </body>
      </dialog>
      <dialog>
        <body>
          "When the mail comes," explained the large cloud bird, "the mail is delivered by the mail delivery man. But, sometimes, when the mail comes, the mail delivery man is delayed."
        </body>
      </dialog>
      <dialog>
        <body>
          The small cloud bird blinked. "When the mail is delivered, and the mail delivery man is delayed, who delays the mail delivery man's delivery of the mail?"
        </body>
      </dialog>
      <dialog>
        <body>
          The large cloud bird puffed its chest and spread its ethereal feathers. Its eyes widened, and it shuffled a bit, as if to prolong the suspense.
        </body>
      </dialog>
      <dialog goto="wake-up-in-park">
        <body>
          "The dog!"
        </body>
      </dialog>
    </scene>
    
  </scenes>
</game>
